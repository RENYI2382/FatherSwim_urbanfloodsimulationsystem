<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>基于差序格局理论的洪灾ABM仿真系统 - 项目展示</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', 'Segoe UI', 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #667eea 100%);
            color: #333;
            line-height: 1.6;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5rem;
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: 700;
        }
        
        .header .subtitle {
            font-size: 1.2rem;
            color: #7f8c8d;
            margin-bottom: 20px;
        }
        
        .tech-stack {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 20px;
        }
        
        .tech-badge {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            padding: 8px 16px;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }
        
        .tech-badge.backend { background: linear-gradient(45deg, #e74c3c, #c0392b); }
        .tech-badge.simulation { background: linear-gradient(45deg, #27ae60, #229954); }
        .tech-badge.frontend { background: linear-gradient(45deg, #9b59b6, #8e44ad); }
        .tech-badge.theory { background: linear-gradient(45deg, #f39c12, #e67e22); }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .card {
            background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15), 0 8px 25px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(15px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .card:hover::before {
            left: 100%;
        }
        
        .card:hover {
             transform: translateY(-10px) scale(1.02);
             box-shadow: 0 30px 80px rgba(0, 0, 0, 0.2), 0 15px 40px rgba(0, 0, 0, 0.15);
         }
        
        .card h3 {
            color: #1a202c;
            margin-bottom: 25px;
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
            z-index: 1;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .metric-card {
            background: linear-gradient(135deg, #667eea, #764ba2, #f093fb);
            color: white;
            padding: 25px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4), 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            border-left: none;
        }
        
        .metric-card:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 25px 60px rgba(102, 126, 234, 0.5), 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        
        .metric-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
            transform: scale(0);
            transition: transform 0.6s ease;
        }
        
        .metric-card:hover::before {
            transform: scale(1);
        }
        
        .metric-card.success { 
            background: linear-gradient(135deg, #27ae60, #2ecc71, #58d68d);
        }
        .metric-card.warning { 
            background: linear-gradient(135deg, #f39c12, #e67e22, #f7dc6f);
        }
        .metric-card.info { 
            background: linear-gradient(135deg, #9b59b6, #8e44ad, #bb8fce);
        }
        
        .metric-value {
            font-size: 3rem;
            font-weight: 700;
            color: white;
            margin: 10px 0;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 1;
        }
        
        .metric-label {
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 10px;
            font-weight: 500;
            position: relative;
            z-index: 1;
        }
        
        .metric-change {
            font-size: 1.2rem;
            font-weight: 600;
            padding: 5px 15px;
            border-radius: 20px;
            display: inline-block;
        }
        
        .metric-change.positive {
            background: rgba(39, 174, 96, 0.1);
            color: #27ae60;
        }
        
        .metric-change.negative {
            background: rgba(231, 76, 60, 0.1);
            color: #e74c3c;
        }
        
        .chart-container {
            height: 350px;
            margin: 25px 0;
            position: relative;
            background: linear-gradient(145deg, #f8f9fa, #ffffff);
            border-radius: 15px;
            padding: 20px;
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }
        
        .chart-container:hover {
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.1), 0 5px 20px rgba(0, 0, 0, 0.1);
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .animate-pulse {
            animation: pulse 2s infinite;
        }
        
        .animate-fadeInUp {
            animation: fadeInUp 0.6s ease-out;
        }
        
        .feature-list {
            list-style: none;
            padding: 0;
        }
        
        .feature-list li {
            padding: 12px 0;
            border-bottom: 1px solid #ecf0f1;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .feature-list li:last-child {
            border-bottom: none;
        }
        
        .feature-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(45deg, #3498db, #2980b9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .architecture-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .architecture-flow {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 30px 0;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .arch-component {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            min-width: 150px;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }
        
        .arch-component h4 {
            font-size: 1.1rem;
            margin-bottom: 8px;
        }
        
        .arch-component p {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .arrow {
            font-size: 2rem;
            color: #7f8c8d;
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        
        .methodology-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .step-card {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid #3498db;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            position: relative;
        }
        
        .step-number {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            background: #3498db;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .innovation-highlights {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        
        .highlight-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            border-left: 5px solid #e74c3c;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }
        
        .highlight-card.tech { border-left-color: #3498db; }
        .highlight-card.method { border-left-color: #27ae60; }
        .highlight-card.impact { border-left-color: #9b59b6; }
        
        /* Demo样式 */
        .demo-container {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
            margin-top: 20px;
        }
        
        .demo-controls {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #e9ecef;
        }
        
        .control-group {
            margin-bottom: 20px;
        }
        
        .control-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .slider {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
            margin-bottom: 5px;
        }
        
        .slider::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(45deg, #667eea, #764ba2);
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }
        
        .control-buttons {
            display: flex;
            gap: 10px;
            margin-top: 25px;
        }
        
        .demo-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
        }
        
        .demo-btn.primary {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
        }
        
        .demo-btn.secondary {
            background: linear-gradient(45deg, #f39c12, #e67e22);
            color: white;
        }
        
        .demo-btn.tertiary {
            background: linear-gradient(45deg, #95a5a6, #7f8c8d);
            color: white;
        }
        
        .demo-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .demo-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .demo-visualization {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .simulation-canvas {
            position: relative;
            background: #2c3e50;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        #demoCanvas {
            display: block;
            width: 100%;
            height: auto;
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
        }
        
        .simulation-overlay {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }
        
        .status-panel {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .status-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
        }
        
        .status-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .status-value {
            font-weight: 700;
            color: #3498db;
        }
        
        .demo-results {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .result-chart {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #e9ecef;
        }
        
        .result-summary {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #e9ecef;
        }
        
        .result-summary h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        
        #resultText {
            color: #7f8c8d;
            font-size: 0.9rem;
            line-height: 1.5;
            font-weight: 400;
            -webkit-font-smoothing: antialiased;
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .architecture-flow {
                flex-direction: column;
            }
            
            .arrow {
                transform: rotate(90deg);
            }
            
            .demo-container {
                grid-template-columns: 1fr;
            }
            
            .demo-results {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- 导航栏 -->
    <nav style="background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(15px); padding: 15px 0; box-shadow: 0 4px 20px rgba(0,0,0,0.1); border-bottom: 1px solid rgba(255,255,255,0.2); margin-bottom: 2rem;">
        <div style="max-width: 1400px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; padding: 0 20px;">
            <div style="display: flex; align-items: center; gap: 20px;">
                <a href="/" style="color: white; text-decoration: none; font-weight: 600; font-size: 1.1em; padding: 8px 16px; border-radius: 25px; background: rgba(255,255,255,0.1); transition: all 0.3s ease;" onmouseover="this.style.background='rgba(255,255,255,0.2)'; this.style.transform='translateY(-2px)'" onmouseout="this.style.background='rgba(255,255,255,0.1)'; this.style.transform='translateY(0)'">🏠 主页</a>
                <span style="color: rgba(255,255,255,0.5); font-size: 1.2em;">•</span>
                <span style="color: #fff; font-weight: 700; background: linear-gradient(45deg, #e74c3c, #c0392b); padding: 8px 16px; border-radius: 25px; box-shadow: 0 4px 15px rgba(231, 76, 60, 0.3);">🎯 项目展示</span>
            </div>
            <div style="display: flex; gap: 15px;">
                <a href="/dashboard" style="color: white; text-decoration: none; padding: 8px 16px; border-radius: 25px; transition: all 0.3s ease; background: rgba(255,255,255,0.1); font-weight: 500;" onmouseover="this.style.background='rgba(255,255,255,0.2)'; this.style.transform='translateY(-2px)'" onmouseout="this.style.background='rgba(255,255,255,0.1)'; this.style.transform='translateY(0)'">📊 基础版</a>
                <a href="/enhanced_dashboard" style="color: white; text-decoration: none; padding: 8px 16px; border-radius: 25px; transition: all 0.3s ease; background: rgba(255,255,255,0.1); font-weight: 500;" onmouseover="this.style.background='rgba(255,255,255,0.2)'; this.style.transform='translateY(-2px)'" onmouseout="this.style.background='rgba(255,255,255,0.1)'; this.style.transform='translateY(0)'">📈 增强版</a>
                <a href="/interactive_simulation" style="color: white; text-decoration: none; padding: 8px 16px; border-radius: 25px; transition: all 0.3s ease; background: rgba(255,255,255,0.1); font-weight: 500;" onmouseover="this.style.background='rgba(255,255,255,0.2)'; this.style.transform='translateY(-2px)'" onmouseout="this.style.background='rgba(255,255,255,0.1)'; this.style.transform='translateY(0)'">🎮 仿真</a>
            </div>
        </div>
    </nav>
    
    <div class="container">
        <!-- 项目标题与技术栈 -->
        <div class="header">
            <h1>🌊 基于差序格局理论的洪灾ABM仿真系统</h1>
            <p class="subtitle">跨学科融合：社会学理论 × 计算机仿真 × 数据科学</p>
            <div class="tech-stack">
                <span class="tech-badge backend">Python Flask</span>
                <span class="tech-badge simulation">Mesa ABM</span>
                <span class="tech-badge backend">NetworkX</span>
                <span class="tech-badge frontend">D3.js</span>
                <span class="tech-badge frontend">Chart.js</span>
                <span class="tech-badge theory">差序格局理论</span>
                <span class="tech-badge backend">Pandas</span>
                <span class="tech-badge simulation">SciPy</span>
            </div>
        </div>
        
        <!-- 核心成果指标 -->
        <div class="grid">
            <div class="card metric-card success">
                <div class="metric-label">生存率提升</div>
                <div class="metric-value">73.2%</div>
                <div class="metric-change positive">+8.2%</div>
                <p style="margin-top: 15px; color: #7f8c8d;">强差序格局 vs 普遍主义策略<br>统计显著性: p < 0.01</p>
            </div>
            
            <div class="card metric-card warning">
                <div class="metric-label">疏散效率提升</div>
                <div class="metric-value">24.5</div>
                <div class="metric-change negative">-38.3%</div>
                <p style="margin-top: 15px; color: #7f8c8d;">平均疏散时间(分钟)<br>效率显著提升</p>
            </div>
            
            <div class="card metric-card info">
                <div class="metric-label">仿真规模</div>
                <div class="metric-value">200×100</div>
                <div class="metric-change positive">大规模</div>
                <p style="margin-top: 15px; color: #7f8c8d;">智能体数量 × 仿真步数<br>可靠性验证</p>
            </div>
            
            <div class="card metric-card">
                <div class="metric-label">网络效应</div>
                <div class="metric-value">+0.12</div>
                <div class="metric-change positive">显著相关</div>
                <p style="margin-top: 15px; color: #7f8c8d;">网络密度与生存率<br>社会网络价值验证</p>
            </div>
        </div>
        
        <!-- 系统架构展示 -->
        <div class="architecture-section">
            <h2 style="color: #2c3e50; margin-bottom: 20px; text-align: center;">🏗️ 系统架构设计</h2>
            <div class="architecture-flow">
                <div class="arch-component">
                    <h4>前端可视化</h4>
                    <p>D3.js + Chart.js<br>实时交互界面</p>
                </div>
                <div class="arrow">→</div>
                <div class="arch-component">
                    <h4>Flask API</h4>
                    <p>RESTful服务<br>WebSocket通信</p>
                </div>
                <div class="arrow">→</div>
                <div class="arch-component">
                    <h4>ABM仿真引擎</h4>
                    <p>Mesa框架<br>智能体建模</p>
                </div>
                <div class="arrow">→</div>
                <div class="arch-component">
                    <h4>理论模型</h4>
                    <p>差序格局理论<br>社会网络分析</p>
                </div>
            </div>
        </div>
        
        <!-- 项目方法论 -->
        <div class="card">
            <h3>🎯 项目实现方法论</h3>
            <div class="methodology-steps">
                <div class="step-card">
                    <div class="step-number">1</div>
                    <h4 style="margin-top: 20px; color: #2c3e50;">问题定义</h4>
                    <p style="color: #7f8c8d;">洪灾应对中社会关系影响机制研究</p>
                </div>
                <div class="step-card">
                    <div class="step-number">2</div>
                    <h4 style="margin-top: 20px; color: #2c3e50;">理论建模</h4>
                    <p style="color: #7f8c8d;">差序格局理论数学化建模</p>
                </div>
                <div class="step-card">
                    <div class="step-number">3</div>
                    <h4 style="margin-top: 20px; color: #2c3e50;">系统实现</h4>
                    <p style="color: #7f8c8d;">ABM仿真平台开发</p>
                </div>
                <div class="step-card">
                    <div class="step-number">4</div>
                    <h4 style="margin-top: 20px; color: #2c3e50;">实验验证</h4>
                    <p style="color: #7f8c8d;">大规模仿真与统计分析</p>
                </div>
                <div class="step-card">
                    <div class="step-number">5</div>
                    <h4 style="margin-top: 20px; color: #2c3e50;">成果输出</h4>
                    <p style="color: #7f8c8d;">可视化报告与政策建议</p>
                </div>
            </div>
        </div>
        
        <!-- 技术创新亮点 -->
        <div class="card">
            <h3>🚀 技术创新与价值亮点</h3>
            <div class="innovation-highlights">
                <div class="highlight-card tech">
                    <h4 style="color: #3498db; margin-bottom: 15px;">跨学科技术融合</h4>
                    <ul style="color: #7f8c8d; list-style: none; padding: 0;">
                        <li>✓ 社会学理论 + 计算机仿真</li>
                        <li>✓ 文化适应性建模方法</li>
                        <li>✓ 本土化灾害管理创新</li>
                    </ul>
                </div>
                <div class="highlight-card method">
                    <h4 style="color: #27ae60; margin-bottom: 15px;">系统架构设计</h4>
                    <ul style="color: #7f8c8d; list-style: none; padding: 0;">
                        <li>✓ 模块化ABM仿真框架</li>
                        <li>✓ 实时可视化交互系统</li>
                        <li>✓ 高可扩展性架构设计</li>
                    </ul>
                </div>
                <div class="highlight-card impact">
                    <h4 style="color: #9b59b6; margin-bottom: 15px;">实际应用价值</h4>
                    <ul style="color: #7f8c8d; list-style: none; padding: 0;">
                        <li>✓ 灾害管理决策支持</li>
                        <li>✓ 政策制定科学参考</li>
                        <li>✓ 社会治理模式创新</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- 交互式演算Demo -->
        <div class="card">
            <h3>🎮 交互式仿真演算Demo</h3>
            <div class="demo-container">
                <div class="demo-controls">
                    <div class="control-group">
                        <label>智能体数量:</label>
                        <input type="range" id="agentCount" min="10" max="100" value="50" class="slider">
                        <span id="agentCountValue">50</span>
                    </div>
                    <div class="control-group">
                        <label>洪水强度:</label>
                        <input type="range" id="floodIntensity" min="1" max="10" value="5" class="slider">
                        <span id="floodIntensityValue">5</span>
                    </div>
                    <div class="control-group">
                        <label>差序格局强度:</label>
                        <input type="range" id="patternStrength" min="0" max="100" value="70" class="slider">
                        <span id="patternStrengthValue">70%</span>
                    </div>
                    <div class="control-buttons">
                        <button id="startDemo" class="demo-btn primary">开始仿真</button>
                        <button id="pauseDemo" class="demo-btn secondary" disabled>暂停</button>
                        <button id="resetDemo" class="demo-btn tertiary">重置</button>
                    </div>
                </div>
                
                <div class="demo-visualization">
                    <div class="simulation-canvas">
                        <canvas id="demoCanvas" width="600" height="400"></canvas>
                        <div class="simulation-overlay">
                            <div class="status-panel">
                                <div class="status-item">
                                    <span class="status-label">存活率:</span>
                                    <span id="survivalRate" class="status-value">0%</span>
                                </div>
                                <div class="status-item">
                                    <span class="status-label">平均疏散时间:</span>
                                    <span id="evacuationTime" class="status-value">0分钟</span>
                                </div>
                                <div class="status-item">
                                    <span class="status-label">仿真步数:</span>
                                    <span id="simulationStep" class="status-value">0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="demo-results">
                        <div class="result-chart">
                            <canvas id="demoResultChart" width="300" height="200"></canvas>
                        </div>
                        <div class="result-summary">
                            <h4>实时结果分析</h4>
                            <div id="resultText">点击"开始仿真"查看实时分析结果</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 核心技术能力展示 -->
         <div class="grid">
             <div class="card">
                 <h3>📊 数据科学与机器学习</h3>
                 <div style="background: #1a252f; color: #ecf0f1; padding: 20px; border-radius: 10px; font-family: 'Courier New', monospace; font-size: 0.85rem; overflow-x: auto;">
                     <div style="color: #3498db; margin-bottom: 8px;"># 多元统计分析与模型优化</div>
                     <div><span style="color: #e74c3c;">import</span> numpy <span style="color: #e74c3c;">as</span> np, pandas <span style="color: #e74c3c;">as</span> pd</div>
                     <div><span style="color: #e74c3c;">from</span> sklearn.ensemble <span style="color: #e74c3c;">import</span> RandomForestRegressor</div>
                     <div><span style="color: #e74c3c;">from</span> scipy.stats <span style="color: #e74c3c;">import</span> ttest_ind, chi2_contingency</div>
                     <div style="margin-top: 8px;"><span style="color: #3498db;"># 生存分析与策略效果评估</span></div>
                     <div>survival_model = CoxPHFitter()</div>
                     <div>survival_model.fit(df, <span style="color: #2ecc71;">'duration'</span>, <span style="color: #2ecc71;">'event'</span>)</div>
                     <div style="margin-top: 8px;"><span style="color: #3498db;"># 网络分析与图神经网络</span></div>
                     <div>G = nx.from_pandas_adjacency(adj_matrix)</div>
                     <div>centrality = nx.betweenness_centrality(G)</div>
                     <div style="margin-top: 12px; color: #95a5a6;">✓ SciPy • Pandas • NetworkX • Scikit-learn • Lifelines</div>
                 </div>
             </div>
            
            <div class="card">
                 <h3>⚡ 性能优化与并发处理</h3>
                 <div style="background: #2d3748; color: #e2e8f0; padding: 20px; border-radius: 10px; font-family: 'Courier New', monospace; font-size: 0.85rem; overflow-x: auto;">
                     <div style="color: #3498db; margin-bottom: 8px;"># 异步并发与内存优化</div>
                     <div><span style="color: #e74c3c;">import</span> asyncio, multiprocessing</div>
                     <div><span style="color: #e74c3c;">from</span> concurrent.futures <span style="color: #e74c3c;">import</span> ThreadPoolExecutor</div>
                     <div style="margin-top: 8px;"><span style="color: #e74c3c;">async def</span> <span style="color: #f39c12;">parallel_simulation</span>(agents_batch):</div>
                     <div>    <span style="color: #e74c3c;">with</span> ThreadPoolExecutor(max_workers=8) <span style="color: #e74c3c;">as</span> executor:</div>
                     <div>        tasks = [executor.submit(agent.step) <span style="color: #e74c3c;">for</span> agent <span style="color: #e74c3c;">in</span> agents_batch]</div>
                     <div>        <span style="color: #e74c3c;">return await</span> asyncio.gather(*tasks)</div>
                     <div style="margin-top: 8px;"><span style="color: #3498db;"># 缓存策略与数据库优化</span></div>
                     <div><span style="color: #e74c3c;">@lru_cache</span>(maxsize=1024)</div>
                     <div><span style="color: #e74c3c;">def</span> <span style="color: #f39c12;">calculate_network_metrics</span>(graph_hash):</div>
                     <div>    <span style="color: #e74c3c;">return</span> expensive_computation(graph_hash)</div>
                     <div style="margin-top: 12px; color: #95a5a6;">✓ 多线程 • 异步IO • 内存池 • Redis缓存 • 数据库索引</div>
                 </div>
             </div>
            
            <div class="card">
                 <h3>📈 算法性能与可视化</h3>
                 <div class="chart-container">
                     <canvas id="performanceChart"></canvas>
                 </div>
                 <div style="margin-top: 15px; background: #f8f9fa; padding: 15px; border-radius: 8px; font-size: 0.9rem;">
                     <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                         <span><strong>算法复杂度:</strong> O(n log n)</span>
                         <span><strong>内存使用:</strong> 85MB</span>
                     </div>
                     <div style="display: flex; justify-content: space-between;">
                         <span><strong>并发线程:</strong> 8 threads</span>
                         <span><strong>处理速度:</strong> 2000 agents/sec</span>
                     </div>
                 </div>
             </div>
            
            <div class="card">
                <h3>🏗️ 系统架构设计</h3>
                <div style="background: #34495e; color: #ecf0f1; padding: 20px; border-radius: 10px; font-family: 'Courier New', monospace; font-size: 0.9rem; overflow-x: auto;">
                    <div style="color: #3498db; margin-bottom: 10px;">// 微服务架构 + 异步处理</div>
                    <div><span style="color: #e74c3c;">@app.route</span>(<span style="color: #2ecc71;">'/api/simulation'</span>, methods=[<span style="color: #2ecc71;">'POST'</span>])</div>
                    <div><span style="color: #e74c3c;">async def</span> <span style="color: #f39c12;">run_simulation</span>():</div>
                    <div>    simulation = ABMSimulation(config)</div>
                    <div>    results = <span style="color: #e74c3c;">await</span> simulation.run_async()</div>
                    <div>    <span style="color: #e74c3c;">return</span> jsonify(results)</div>
                    <div style="margin-top: 10px;"><span style="color: #3498db;"># WebSocket实时通信</span></div>
                    <div><span style="color: #e74c3c;">@socketio.on</span>(<span style="color: #2ecc71;">'update_params'</span>)</div>
                    <div><span style="color: #e74c3c;">def</span> <span style="color: #f39c12;">handle_param_update</span>(data):</div>
                    <div>    emit(<span style="color: #2ecc71;">'simulation_update'</span>, broadcast=<span style="color: #e74c3c;">True</span>)</div>
                    <div style="margin-top: 15px; color: #95a5a6;">✓ Flask + WebSocket + 异步处理 + RESTful API</div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
         // 等待Chart.js加载完成
         function initCharts() {
             if (typeof Chart === 'undefined') {
                 setTimeout(initCharts, 100);
                 return;
             }
             
             // 算法性能优化图表
             const perfCtx = document.getElementById('performanceChart').getContext('2d');
             new Chart(perfCtx, {
             type: 'line',
             data: {
                 labels: ['初始版本', '多线程优化', '内存池优化', '缓存策略', '异步IO', '最终版本'],
                 datasets: [{
                     label: '处理速度 (agents/sec)',
                     data: [200, 450, 800, 1200, 1600, 2000],
                     borderColor: 'rgba(52, 152, 219, 1)',
                     backgroundColor: 'rgba(52, 152, 219, 0.1)',
                     borderWidth: 3,
                     fill: true,
                     tension: 0.4
                 }, {
                     label: '内存使用 (MB)',
                     data: [150, 140, 120, 100, 90, 85],
                     borderColor: 'rgba(231, 76, 60, 1)',
                     backgroundColor: 'rgba(231, 76, 60, 0.1)',
                     borderWidth: 3,
                     fill: true,
                     tension: 0.4,
                     yAxisID: 'y1'
                 }]
             },
             options: {
                 responsive: true,
                 maintainAspectRatio: false,
                 plugins: {
                     title: {
                         display: true,
                         text: '算法性能优化历程',
                         font: { size: 16, weight: 'bold' },
                         color: '#2c3e50'
                     },
                     legend: {
                         position: 'top'
                     }
                 },
                 scales: {
                     y: {
                         type: 'linear',
                         display: true,
                         position: 'left',
                         title: { display: true, text: '处理速度 (agents/sec)' }
                     },
                     y1: {
                         type: 'linear',
                         display: true,
                         position: 'right',
                         title: { display: true, text: '内存使用 (MB)' },
                         grid: { drawOnChartArea: false }
                     }
                 }
             }
         });
         // 策略效果对比图表
          const ctx = document.getElementById('strategyChart').getContext('2d');
          new Chart(ctx, {
             type: 'bar',
             data: {
                 labels: ['强差序格局', '弱差序格局', '普遍主义'],
                 datasets: [{
                     label: '生存率 (%)',
                     data: [73.2, 69.0, 65.0],
                     backgroundColor: [
                         'rgba(39, 174, 96, 0.8)',
                         'rgba(52, 152, 219, 0.8)',
                         'rgba(231, 76, 60, 0.8)'
                     ],
                     borderColor: [
                         'rgba(39, 174, 96, 1)',
                         'rgba(52, 152, 219, 1)',
                         'rgba(231, 76, 60, 1)'
                     ],
                     borderWidth: 2,
                     borderRadius: 8
                 }]
             },
             options: {
                 responsive: true,
                 maintainAspectRatio: false,
                 plugins: {
                     legend: {
                         display: false
                     },
                     title: {
                         display: true,
                         text: '不同策略生存率对比',
                         font: {
                             size: 16,
                             weight: 'bold'
                         },
                         color: '#2c3e50'
                     }
                 },
                 scales: {
                     y: {
                         beginAtZero: true,
                         max: 80,
                         ticks: {
                             callback: function(value) {
                                 return value + '%';
                             }
                         }
                     }
                 }
             }
          });
         }
         
         // 初始化图表
         initCharts();
         
         // Demo仿真逻辑
         class FloodSimulationDemo {
             constructor() {
                 this.canvas = document.getElementById('demoCanvas');
                 if (!this.canvas) {
                     console.error('Canvas element not found');
                     return;
                 }
                 
                 // 设置高DPI支持
                 const dpr = window.devicePixelRatio || 1;
                 const rect = this.canvas.getBoundingClientRect();
                 this.canvas.width = rect.width * dpr;
                 this.canvas.height = rect.height * dpr;
                 this.canvas.style.width = rect.width + 'px';
                 this.canvas.style.height = rect.height + 'px';
                 
                 this.ctx = this.canvas.getContext('2d');
                 this.ctx.scale(dpr, dpr);
                 
                 this.agents = [];
                 this.floodLevel = 0;
                 this.step = 0;
                 this.isRunning = false;
                 this.animationId = null;
                 this.survivalData = [];
                 this.resultChart = null;
                 
                 this.initResultChart();
                 this.bindEvents();
                 this.reset();
             }
             
             initResultChart() {
                 const ctx = document.getElementById('demoResultChart').getContext('2d');
                 this.resultChart = new Chart(ctx, {
                     type: 'line',
                     data: {
                         labels: [],
                         datasets: [{
                             label: '存活率',
                             data: [],
                             borderColor: '#27ae60',
                             backgroundColor: 'rgba(39, 174, 96, 0.1)',
                             tension: 0.4
                         }]
                     },
                     options: {
                         responsive: true,
                         maintainAspectRatio: false,
                         scales: {
                             y: {
                                 beginAtZero: true,
                                 max: 100
                             }
                         }
                     }
                 });
             }
             
             bindEvents() {
                 document.getElementById('agentCount').addEventListener('input', (e) => {
                     document.getElementById('agentCountValue').textContent = e.target.value;
                 });
                 
                 document.getElementById('floodIntensity').addEventListener('input', (e) => {
                     document.getElementById('floodIntensityValue').textContent = e.target.value;
                 });
                 
                 document.getElementById('patternStrength').addEventListener('input', (e) => {
                     document.getElementById('patternStrengthValue').textContent = e.target.value + '%';
                 });
                 
                 document.getElementById('startDemo').addEventListener('click', () => this.start());
                 document.getElementById('pauseDemo').addEventListener('click', () => this.pause());
                 document.getElementById('resetDemo').addEventListener('click', () => this.reset());
             }
             
             createAgents() {
                 const count = parseInt(document.getElementById('agentCount').value);
                 const patternStrength = parseInt(document.getElementById('patternStrength').value) / 100;
                 
                 this.agents = [];
                 for (let i = 0; i < count; i++) {
                     this.agents.push({
                         id: i,
                         x: Math.random() * (this.canvas.width - 20) + 10,
                         y: Math.random() * (this.canvas.height - 20) + 10,
                         vx: 0,
                         vy: 0,
                         alive: true,
                         evacuated: false,
                         socialStrength: Math.random() * patternStrength + 0.1,
                         connections: [],
                         color: this.getAgentColor(Math.random() * patternStrength + 0.1)
                     });
                 }
                 
                 // 建立社会网络连接
                 this.agents.forEach(agent => {
                     const connectionCount = Math.floor(agent.socialStrength * 5) + 1;
                     for (let i = 0; i < connectionCount; i++) {
                         const target = this.agents[Math.floor(Math.random() * this.agents.length)];
                         if (target !== agent && !agent.connections.includes(target)) {
                             agent.connections.push(target);
                         }
                     }
                 });
             }
             
             getAgentColor(socialStrength) {
                 const intensity = Math.floor(socialStrength * 255);
                 return `rgb(${255-intensity}, ${intensity}, 100)`;
             }
             
             start() {
                 if (!this.isRunning) {
                     this.isRunning = true;
                     document.getElementById('startDemo').disabled = true;
                     document.getElementById('pauseDemo').disabled = false;
                     this.animate();
                 }
             }
             
             pause() {
                 this.isRunning = false;
                 document.getElementById('startDemo').disabled = false;
                 document.getElementById('pauseDemo').disabled = true;
                 if (this.animationId) {
                     cancelAnimationFrame(this.animationId);
                 }
             }
             
             reset() {
                 this.pause();
                 this.step = 0;
                 this.floodLevel = 0;
                 this.survivalData = [];
                 this.createAgents();
                 this.updateUI();
                 this.draw();
                 
                 // 重置图表
                 this.resultChart.data.labels = [];
                 this.resultChart.data.datasets[0].data = [];
                 this.resultChart.update();
                 
                 document.getElementById('resultText').textContent = '点击"开始仿真"查看实时分析结果';
             }
             
             animate() {
                 if (!this.isRunning) return;
                 
                 this.step++;
                 this.updateSimulation();
                 this.draw();
                 this.updateUI();
                 
                 if (this.step % 10 === 0) {
                     this.updateChart();
                 }
                 
                 this.animationId = requestAnimationFrame(() => this.animate());
             }
             
             updateSimulation() {
                 const floodIntensity = parseInt(document.getElementById('floodIntensity').value);
                 this.floodLevel = Math.min(this.canvas.height * 0.8, this.step * floodIntensity * 0.5);
                 
                 this.agents.forEach(agent => {
                     if (!agent.alive || agent.evacuated) return;
                     
                     // 洪水威胁检测
                     if (agent.y > this.canvas.height - this.floodLevel) {
                         agent.alive = false;
                         return;
                     }
                     
                     // 疏散行为（基于差序格局）
                     let targetX = agent.x;
                     let targetY = 0; // 向上疏散
                     
                     // 社会网络影响
                     agent.connections.forEach(connection => {
                         if (connection.alive && !connection.evacuated) {
                             const dx = connection.x - agent.x;
                             const dy = connection.y - agent.y;
                             const distance = Math.sqrt(dx*dx + dy*dy);
                             
                             if (distance < 50) {
                                 targetX += dx * agent.socialStrength * 0.1;
                                 targetY += dy * agent.socialStrength * 0.1;
                             }
                         }
                     });
                     
                     // 移动
                     const speed = 2 + agent.socialStrength * 2;
                     agent.vx = (targetX - agent.x) * 0.1;
                     agent.vy = (targetY - agent.y) * 0.1 - speed;
                     
                     agent.x += agent.vx;
                     agent.y += agent.vy;
                     
                     // 边界检测
                     agent.x = Math.max(5, Math.min(this.canvas.width - 5, agent.x));
                     agent.y = Math.max(5, Math.min(this.canvas.height - 5, agent.y));
                     
                     // 疏散成功检测
                     if (agent.y < 30) {
                         agent.evacuated = true;
                     }
                 });
             }
             
             draw() {
                 // 清空画布
                 this.ctx.fillStyle = '#34495e';
                 this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                 
                 // 绘制洪水
                 if (this.floodLevel > 0) {
                     const gradient = this.ctx.createLinearGradient(0, this.canvas.height - this.floodLevel, 0, this.canvas.height);
                     gradient.addColorStop(0, 'rgba(52, 152, 219, 0.6)');
                     gradient.addColorStop(1, 'rgba(41, 128, 185, 0.9)');
                     this.ctx.fillStyle = gradient;
                     this.ctx.fillRect(0, this.canvas.height - this.floodLevel, this.canvas.width, this.floodLevel);
                 }
                 
                 // 绘制安全区域
                 this.ctx.fillStyle = 'rgba(39, 174, 96, 0.3)';
                 this.ctx.fillRect(0, 0, this.canvas.width, 30);
                 this.ctx.fillStyle = '#27ae60';
                 this.ctx.font = '14px Inter';
                 this.ctx.fillText('安全区域', 10, 20);
                 
                 // 绘制智能体
                 this.agents.forEach(agent => {
                     if (!agent.alive) {
                         this.ctx.fillStyle = '#e74c3c';
                         this.ctx.fillRect(agent.x - 3, agent.y - 3, 6, 6);
                     } else if (agent.evacuated) {
                         this.ctx.fillStyle = '#27ae60';
                         this.ctx.beginPath();
                         this.ctx.arc(agent.x, agent.y, 4, 0, Math.PI * 2);
                         this.ctx.fill();
                     } else {
                         this.ctx.fillStyle = agent.color;
                         this.ctx.beginPath();
                         this.ctx.arc(agent.x, agent.y, 3, 0, Math.PI * 2);
                         this.ctx.fill();
                     }
                 });
                 
                 // 绘制社会网络连接（部分）
                 this.ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
                 this.ctx.lineWidth = 1;
                 this.agents.slice(0, 10).forEach(agent => {
                     if (agent.alive && !agent.evacuated) {
                         agent.connections.slice(0, 2).forEach(connection => {
                             if (connection.alive && !connection.evacuated) {
                                 this.ctx.beginPath();
                                 this.ctx.moveTo(agent.x, agent.y);
                                 this.ctx.lineTo(connection.x, connection.y);
                                 this.ctx.stroke();
                             }
                         });
                     }
                 });
             }
             
             updateUI() {
                 const alive = this.agents.filter(a => a.alive).length;
                 const evacuated = this.agents.filter(a => a.evacuated).length;
                 const total = this.agents.length;
                 
                 const survivalRate = ((alive + evacuated) / total * 100).toFixed(1);
                 const avgEvacuationTime = (this.step * 0.1).toFixed(1);
                 
                 document.getElementById('survivalRate').textContent = survivalRate + '%';
                 document.getElementById('evacuationTime').textContent = avgEvacuationTime + '分钟';
                 document.getElementById('simulationStep').textContent = this.step;
                 
                 // 更新结果文本
                 const patternStrength = parseInt(document.getElementById('patternStrength').value);
                 let analysis = `当前差序格局强度: ${patternStrength}%\n`;
                 analysis += `存活率: ${survivalRate}%\n`;
                 analysis += `已疏散: ${evacuated}人\n`;
                 analysis += `仍存活: ${alive - evacuated}人\n`;
                 
                 if (patternStrength > 70) {
                     analysis += '\n强差序格局下，社会网络发挥重要作用，群体协作效果显著。';
                 } else if (patternStrength > 40) {
                     analysis += '\n中等差序格局，个体与群体行为并重。';
                 } else {
                     analysis += '\n弱差序格局，更接近个体理性选择模式。';
                 }
                 
                 document.getElementById('resultText').textContent = analysis;
             }
             
             updateChart() {
                 const alive = this.agents.filter(a => a.alive).length;
                 const total = this.agents.length;
                 const survivalRate = (alive / total * 100).toFixed(1);
                 
                 this.resultChart.data.labels.push(Math.floor(this.step / 10));
                 this.resultChart.data.datasets[0].data.push(parseFloat(survivalRate));
                 
                 // 保持图表数据在合理范围内
                 if (this.resultChart.data.labels.length > 20) {
                     this.resultChart.data.labels.shift();
                     this.resultChart.data.datasets[0].data.shift();
                 }
                 
                 this.resultChart.update('none');
             }
         }
         
         // 初始化Demo
         let floodDemo = null;
         
         // 确保DOM加载完成后初始化
         function initializeDemo() {
             if (document.getElementById('demoCanvas') && typeof Chart !== 'undefined') {
                 try {
                     floodDemo = new FloodSimulationDemo();
                     console.log('FloodSimulationDemo initialized successfully');
                 } catch (error) {
                     console.error('Failed to initialize FloodSimulationDemo:', error);
                 }
             } else {
                 console.log('Waiting for dependencies to load...');
                 setTimeout(initializeDemo, 200);
             }
         }
         
         // 页面加载动画和交互效果
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化Demo
            initializeDemo();
            
            // 卡片淡入动画
            const cards = document.querySelectorAll('.card');
            cards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(30px)';
                setTimeout(() => {
                    card.style.transition = 'all 0.6s cubic-bezier(0.4, 0, 0.2, 1)';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 150);
            });
            
            // 指标卡片数字动画
            const metricValues = document.querySelectorAll('.metric-value');
            metricValues.forEach(value => {
                const finalValue = parseFloat(value.textContent);
                const suffix = value.textContent.replace(/[0-9.]/g, '');
                let currentValue = 0;
                const increment = finalValue / 50;
                const timer = setInterval(() => {
                    currentValue += increment;
                    if (currentValue >= finalValue) {
                        currentValue = finalValue;
                        clearInterval(timer);
                    }
                    value.textContent = currentValue.toFixed(1) + suffix;
                }, 30);
            });
            
            // 滚动视差效果
            window.addEventListener('scroll', () => {
                const scrolled = window.pageYOffset;
                const parallax = document.querySelector('body');
                const speed = scrolled * 0.5;
                parallax.style.backgroundPosition = `center ${speed}px`;
            });
            
            // 鼠标跟随效果
            document.addEventListener('mousemove', (e) => {
                const cursor = document.querySelector('.cursor');
                if (!cursor) {
                    const newCursor = document.createElement('div');
                    newCursor.className = 'cursor';
                    newCursor.style.cssText = `
                        position: fixed;
                        width: 20px;
                        height: 20px;
                        background: radial-gradient(circle, rgba(102, 126, 234, 0.8), transparent);
                        border-radius: 50%;
                        pointer-events: none;
                        z-index: 9999;
                        transition: transform 0.1s ease;
                    `;
                    document.body.appendChild(newCursor);
                }
                const cursorElement = document.querySelector('.cursor');
                cursorElement.style.left = e.clientX - 10 + 'px';
                cursorElement.style.top = e.clientY - 10 + 'px';
            });
        });
        
        // 添加一些交互效果
        document.querySelectorAll('.card').forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-5px)';
            });
            
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
            });
        });
    </script>
</body>
</html>